// Rasmlar Telegram file_id bilan
const FULL_MENU = {
  osh: [
    {id:1,name:"G‘ijduvoncha osh",price:25000,file_id:"BQACAgIAAxkBAAIEa2bGHTD3uG7E8jXlHKQABQ1AAeG8kAACBQAD29tNCx7zyUhBTy8zBA"},
    {id:2,name:"Farg‘ona osh",price:27000,file_id:"BQACAgIAAxkBAAIEbGbGHTp7zjPk6S1E1ZgAAdV9BAABTYAAAgUAD9vbTQsUqP5CAAGvYjME"},
    {id:3,name:"Toshkentcha osh",price:26000,file_id:"BQACAgIAAxkBAAIEbWbGHTzKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:4,name:"Qovurma osh",price:28000,file_id:"BQACAgIAAxkBAAIEbmbGHUGb3F0kUcYjKp8AASfsBAABFgACBQAD29tNC4wX8CEBz2IzBA"},
    {id:5,name:"Toy osh",price:35000,file_id:"BQACAgIAAxkBAAIEb2bGHUQrLJcJxYdU3KQBAmPjBCkAAgUAD9vbTQtqGZfHGXLdMwQ"},
    {id:6,name:"Qo‘y go‘shtli osh",price:30000,file_id:"BQACAgIAAxkBAAIEcGbGHUaJtH1kUcYjKp8AASfsBAABFgACBQAD29tNC4wX8CEBz2IzBA"},
    {id:7,name:"Mol go‘shtli osh",price:29000,file_id:"BQACAgIAAxkBAAIEcWbGHUkroJcJxYdU3KQBAmPjBCkAAgUAD9vbTQtqGZfHGXLdMwQ"},
    {id:8,name:"Vegetarian osh",price:22000,file_id:"BQACAgIAAxkBAAIEcmbGHUwqLzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"}
  ],
  shorva: [
    {id:9,name:"Mastava",price:12000,file_id:"BQACAgIAAxkBAAIEc2bGHU7zjPk6S1E1ZgAAdV9BAABTYAAAgUAD9vbTQsUqP5CAAGvYjME"},
    {id:10,name:"Sho‘rva",price:13000,file_id:"BQACAgIAAxkBAAIEdGbGHVDKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:11,name:"Moshxo‘rda",price:14000,file_id:"BQACAgIAAxkBAAIEdWbGHVL3uG7E8jXlHKQABQ1AAeG8kAACBQAD29tNCx7zyUhBTy8zBA"},
    {id:12,name:"Norin",price:15000,file_id:"BQACAgIAAxkBAAIEdmbGHVT7zjPk6S1E1ZgAAdV9BAABTYAAAgUAD9vbTQsUqP5CAAGvYjME"},
    {id:13,name:"Lag‘mon",price:16000,file_id:"BQACAgIAAxkBAAIEd2bGHVnKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:14,name:"Borsch",price:11000,file_id:"BQACAgIAAxkBAAIEeGbGHVv3uG7E8jXlHKQABQ1AAeG8kAACBQAD29tNCx7zyUhBTy8zBA"}
  ],
  kabob: [
    {id:15,name:"Jigar kabob",price:18000,file_id:"BQACAgIAAxkBAAIEeWbGHV_JW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:16,name:"Go‘sht kabob",price:20000,file_id:"BQACAgIAAxkBAAIEembGHWDKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:17,name:"Tovuq kabob",price:17000,file_id:"BQACAgIAAxkBAAIEe2bGHWn3uG7E8jXlHKQABQ1AAeG8kAACBQAD29tNCx7zyUhBTy8zBA"},
    {id:18,name:"Kiyma kabob",price:19000,file_id:"BQACAgIAAxkBAAIEfGbGHW3zjPk6S1E1ZgAAdV9BAABTYAAAgUAD9vbTQsUqP5CAAGvYjME"},
    {id:19,name:"Barbekyu",price:21000,file_id:"BQACAgIAAxkBAAIEfWbGHXPKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"}
  ],
  salat: [
    {id:20,name:"Chimchi",price:6000,file_id:"BQACAgIAAxkBAAIEfmbGHX7JW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:21,name:"Smak",price:7000,file_id:"BQACAgIAAxkBAAIEf2bGHYQ3uG7E8jXlHKQABQ1AAeG8kAACBQAD29tNCx7zyUhBTy8zBA"},
    {id:22,name:"Mimoza",price:8000,file_id:"BQACAgIAAxkBAAIEgGbGHYYKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:23,name:"Olivye",price:9000,file_id:"BQACAgIAAxkBAAIEgWbGHYrzjPk6S1E1ZgAAdV9BAABTYAAAgUAD9vbTQsUqP5CAAGvYjME"},
    {id:24,name:"Sabzavotli",price:5000,file_id:"BQACAgIAAxkBAAIEgmbGHY7KqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"}
  ],
  ichimlik: [
    {id:25,name:"Coca-Cola 0.5",price:6000,file_id:"BQACAgIAAxkBAAIEg2bGHZQ3uG7E8jXlHKQABQ1AAeG8kAACBQAD29tNCx7zyUhBTy8zBA"},
    {id:26,name:"Fanta 0.5",price:6000,file_id:"BQACAgIAAxkBAAIEhGbGHZYKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:27,name:"Pepsi 0.5",price:6000,file_id:"BQACAgIAAxkBAAIEhWbGHZrzjPk6S1E1ZgAAdV9BAABTYAAAgUAD9vbTQsUqP5CAAGvYjME"},
    {id:28,name:"Sprite 0.5",price:6000,file_id:"BQACAgIAAxkBAAIEhmbGHZ7JW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:29,name:"Bolalar 0.5",price:5000,file_id:"BQACAgIAAxkBAAIEh2bGHaQ3uG7E8jXlHKQABQ1AAeG8kAACBQAD29tNCx7zyUhBTy8zBA"},
    {id:30,name:"Suv 0.5",price:2000,file_id:"BQACAgIAAxkBAAIEiGbGHaYKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"}
  ],
  desert: [
    {id:31,name:"Shakarap",price:4000,file_id:"BQACAgIAAxkBAAIEiWbGHarzjPk6S1E1ZgAAdV9BAABTYAAAgUAD9vbTQsUqP5CAAGvYjME"},
    {id:32,name:"Paxlava",price:5000,file_id:"BQACAgIAAxkBAAIEimbGHa7JW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:33,name:"Sumalak",price:6000,file_id:"BQACAgIAAxkBAAIEi2bGHbQ3uG7E8jXlHKQABQ1AAeG8kAACBQAD29tNCx7zyUhBTy8zBA"},
    {id:34,name:"Muzqaymoq",price:7000,file_id:"BQACAgIAAxkBAAIEjGbGHbYKqRzJW4ZJQ6V5AALuBCkAAgUAD9vbTQveCEkRbe0yMwQ"},
    {id:35,name:"Medovik",price:8000,file_id:"BQACAgIAAxkBAAIEjWbGHbrzjPk6S1E1ZgAAdV9BAABTYAAAgUAD9vbTQsUqP5CAAGvYjME"}
  ]
}

let cart = JSON.parse(localStorage.getItem('cart')||'[]');
let currentCat = 'osh';

function saveCart(){localStorage.setItem('cart',JSON.stringify(cart)); updateBadge();}
function updateBadge(){
  const total = cart.reduce((s,i)=>s+i.qty,0);
  document.getElementById('badge').textContent = total||'';
}

function renderCats(){
  const nav = document.getElementById('cats');
  nav.innerHTML='';
  Object.keys(FULL_MENU).forEach(cat=>{
    const btn = document.createElement('button');
    btn.textContent = cat[0].toUpperCase()+cat.slice(1);
    btn.className = cat===currentCat?'active':'';
    btn.onclick = ()=>{currentCat=cat; renderMenu();};
    nav.appendChild(btn);
  });
}

function renderMenu(){
  const container = document.getElementById('menu');
  container.innerHTML='';
  FULL_MENU[currentCat].forEach(item=>{
    const card = document.createElement('div');
    card.className='card';
    // rasm Telegram file_id orqali
    card.innerHTML=`
      <img src="https://api.telegram.org/file/bot<YOUR_BOT_TOKEN>/${item.file_id}" alt="${item.name}" onerror="this.src='https://i.imgur.com/food.jpg'">
      <h3>${item.name}</h3>
      <p class="price">${item.price.toLocaleString()} so‘m</p>
      <button class="btn" onclick="addToCart(${item.id},'${item.name}',${item.price})">Tanlash</button>
    `;
    container.appendChild(card);
  });
}

function addToCart(id,name,price){
  const qty = prompt("Porsiya/soni (1-10):","1");
  if(!qty || +qty<1 || +qty>10) return;
  const exist = cart.find(i=>i.id===id);
  if(exist) exist.qty += +qty;
  else cart.push({id,name,price,qty:+qty});
  saveCart();
  alert("Savatga qo‘shildi!");
}

document.getElementById('themeBtn').onclick=()=>{
  document.body.classList.toggle('dark');
  localStorage.setItem('theme',document.body.classList.contains('dark')?'dark':'light');
};

// init
renderCats();
renderMenu();
updateBadge();
